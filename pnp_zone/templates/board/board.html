{% extends "base.html" %}

{% block body %}
{% load static %}
<link rel="stylesheet" href="{% static "css/hex_tiles.css" %}">

<style>
    .character {
        position: absolute;
    }
    .character svg {
        width: 3vw;
        height: 3vw;
    }
    #grid {
        background-color: #000;
        top: 0;
        left: 0;
        position: absolute;
        z-index: -100;
    }
    #grid .flex-horizontal {
        margin-bottom: -0.75vw;
    }
    #characters {
        top: 0;
        left: 0;
        position: absolute;
        z-index: -50;
    }
    #moderator {
        background: #192734;
        padding: 1vw;
    }
</style>

<div id="grid" class="flex-vertical">
    {% for y_is_even in y_range %}
        <div class="flex-horizontal">
            {% if y_is_even %}
                <svg width="1.5vw" viewBox="50 -1 50 117.5" style="fill:#fff;stroke:#000;margin:0 0.1vw;" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <polygon points="50.0,0 100.0,28.86751345948129 100.0,86.60254037844386 50.0,115.47005383792515"></polygon>
                </svg>
            {% else %}
                <div style="padding:0.05vw"></div>
            {% endif %}

            {% for x_is_even in x_range %}
                <svg width="3vw" viewBox="0 -1 100 117.5" style="fill:#fff;stroke:#000;margin:0 0.1vw;" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <polygon points="0,28.86751345948129 50.0,0 100.0,28.86751345948129 100.0,86.60254037844386 50.0,115.47005383792515 0,86.60254037844386"></polygon>
                </svg>
            {% endfor %}

            {% if not y_is_even %}
                <svg width="1.5vw" viewBox="0 -1 50 117.5" style="fill:#fff;stroke:#000;margin:0 0.1vw;" xmlns="http://www.w3.org/2000/svg" version="1.1">
                    <polygon points="0,28.86751345948129 50.0,0 50.0,115.47005383792515 0,86.60254037844386"></polygon>
                </svg>
            {% endif %}
        </div>
    {% endfor %}
</div>

{% if is_moderator %}
    <div id="moderator" style="float:right">
        <h1>Moderator Tools</h1>
        <hr>
        <form id="new_character">
            <h2>Create new character</h2>
            <p><label>Identifier: <input name="id" type="text"></label></p>
            <p><label>X: <input name="x" type="number"></label></p>
            <p><label>Y: <input name="y" type="number"></label></p>
            <p><label>Color: <input name="color" type="text"></label></p>
        </form>
        <p><button onclick="createCharacter();">New</button></p>
        <hr>
        <form id="delete_character">
            <h2>Delete a character</h2>
            <p><label>Identifier: <input name="id" type="text"></label></p>
        </form>
        <p><button onclick="deleteCharacter();">Delete</button></p>
        <hr>
        <h2>Force page reload</h2>
        <p><button onclick="socket.send({type: 'reload'})">Reload</button></p>
    </div>
{% endif %}

<div id="characters">
    {% for character in characters %}
        {{ character }}
    {% endfor %}
</div>

<script src="{% static "js/socket.js" %}"></script>
<script src="{% static "js/board.js" %}"></script>
{% endblock %}